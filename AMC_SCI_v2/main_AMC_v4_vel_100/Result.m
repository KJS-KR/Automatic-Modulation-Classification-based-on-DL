clc, clear; close all;

snr = -10:2:20;

%% Sim01 Complexity Analysis

% NewDMRS Structure, Number of Test Data = 50000

basicNetAcc = [0.502710000000000   0.502845000000000   0.505390000000000   0.507550000000000   0.571820000000000   0.625690000000000   0.678750000000000   0.731060000000000   0.777120000000000   0.811630000000000   0.851505000000000   0.877220000000000   0.901250000000000   0.914200000000000   0.933115000000000   0.938655000000000];
basicNetTime = [12.4893311000000   11.6643151000000   11.7250251000000   11.6321512000000   11.8188733000000   11.7605831000000   11.6554020000000   11.7499376000000   11.7059616000000   11.7891560000000   11.6899642000000   11.6883154000000   11.6022984000000   11.7484516000000   11.6125921000000   11.7434726000000];

resNetAcc = [0.485415000000000	0.486650000000000	0.487012500000000   0.494270000000000   0.566370000000000   0.614575000000000   0.665970000000000   0.718165000000000   0.773140000000000   0.816105000000000   0.863410000000000   0.890235000000000   0.929250000000000   0.948840000000000   0.964680000000000   0.974795000000000];
resNetTime = [16.4982214000000   15.7844503000000   15.8205236000000   15.9284012000000   15.8093789000000   15.8924760000000   15.9965036000000   15.7939775000000   15.8930708000000   15.9079487000000   15.8848794000000   15.9653024000000   15.4976298000000   15.5205491000000   15.6052521000000   15.4870056000000];

tripleResNetAcc = [0.4704 0.4802 0.4868 0.4926 0.5007 0.5962 0.6678 0.7186 0.7695 0.8145 0.8595 0.8985 0.9254 0.9497 0.9657 0.9790];
tripleResNetTime = [37.6151000000000	31.7083000000000	29.6875000000000	31.1340500000000	31.1930000000000	31.2228000000000	31.1099000000000	29.9304500000000	33.1596500000000	32.5430500000000	32.4985000000000	32.7504000000000	32.2289000000000	33.0049500000000	33.2454000000000	33.0147500000000];

% googleNetAcc = [];
% googleNetTime = [];

% vggNetAcc = [];
% vggNetTime = [];


% figure;
% plot(snr, basicNetAcc, '-x'); hold on; grid on;
% plot(snr, resNetAcc, '-x'); hold on;
% plot(snr, tripleResNetAcc, '-x'); hold on;
% legend("Basic", "ResNet", "Trnn" ,'Location','southeast')

mean(basicNetTime)
mean(resNetTime)
mean(tripleResNetTime)


%% Sim02 DMRS Structure Comparison

nonDmrsAcc = [0.251710000000000	0.251515000000000	0.251320000000000	0.250910000000000	0.324415000000000	0.368515000000000	0.419605000000000	0.467680000000000	0.521710000000000	0.565880000000000	0.604515000000000	0.645480000000000	0.669845000000000	0.690040000000000	0.707660000000000	0.715890000000000];
dmrsAcc = [0.247175000000000   0.251491666666667   0.251791666666667   0.253308333333333   0.323883333333333   0.364650000000000   0.414841666666667   0.464216666666667   0.506983333333333   0.559216666666667   0.607900000000000   0.641966666666667   0.689450000000000   0.717616666666667   0.730258333333333   0.737700000000000];
newDmrsAcc = [0.502710000000000   0.502845000000000   0.495390000000000   0.507550000000000   0.571820000000000   0.625690000000000   0.678750000000000   0.731060000000000   0.777120000000000   0.811630000000000   0.851505000000000   0.877220000000000   0.901250000000000   0.914200000000000   0.933115000000000   0.938655000000000];

figure;
plot(snr, nonDmrsAcc, '-|'); hold on; grid on;
plot(snr, dmrsAcc, '-*'); hold on;
plot(snr, newDmrsAcc, '-x'); hold on;
legend("NonDMRS", "DMRS", "NewDMRS" , 'Location', 'southeast')

%% Sim03 Proposed Method Comparison

acc4Comb_bal100 = [0.5011 0.5095 0.6276 0.6809 0.7331 0.7775 0.8146 0.8474 0.8779 0.9072 0.9267 0.9275 0.9489 0.9511 0.9617 0.9676];


% figure;
% plot(snr, acc4Comb, '-x'); hold on; grid on;

% Rep2
rep2_NoComb_NoFusion = [0.473890000000000   0.486020000000000   0.494355000000000   0.500615000000000   0.555735000000000   0.618585000000000   0.672590000000000   0.722265000000000   0.767435000000000   0.810125000000000   0.840855000000000   0.866330000000000   0.890300000000000   0.919705000000000   0.934335000000000   0.936070000000000];

rep2_NoComb_Voting = [0.474877500000000   0.486087500000000   0.493922500000000   0.499732500000000   0.556455000000000   0.618437500000000   0.672717500000000   0.721752500000000   0.768677500000000   0.809437500000000   0.840730000000000   0.866267500000000   0.890712500000000   0.919777500000000   0.934097500000000   0.936575000000000];
rep2_NoComb_Confidence = [0.481205000000000   0.490030000000000   0.496290000000000   0.501485000000000   0.574790000000000   0.642340000000000   0.699745000000000   0.747655000000000   0.792855000000000   0.833410000000000   0.861785000000000   0.885085000000000   0.907060000000000   0.934550000000000   0.944970000000000   0.946070000000000];
rep2_NoComb_Feature = [0.482590000000000   0.491225000000000   0.496820000000000   0.502185000000000   0.576215000000000   0.646265000000000   0.703635000000000   0.751765000000000   0.796305000000000   0.835610000000000   0.863500000000000   0.885940000000000   0.907515000000000   0.934850000000000   0.945075000000000   0.946225000000000];

rep2_2Comb_NoFusion = [0.493630000000000   0.495270000000000   0.504475000000000   0.592700000000000   0.646000000000000   0.697345000000000   0.746255000000000   0.788820000000000   0.826310000000000   0.855945000000000   0.883695000000000   0.903100000000000   0.924595000000000   0.934185000000000   0.953090000000000   0.954590000000000];

figure;
plot(snr, rep2_NoComb_NoFusion, '-^'); hold on; grid on;
plot(snr, rep2_NoComb_Voting, '-*'); hold on;
plot(snr ,rep2_NoComb_Confidence, "-x"); hold on;
plot(snr ,rep2_NoComb_Feature, "-o"); hold on;
plot(snr ,rep2_2Comb_NoFusion, "-|"); hold on;
title("Aggregation Factor n=2일 때 AMC 결과 그래프")
legend("(a) N_g=1|NoFusion", "(b) N_g=1|Voting", "(c) N_g=1|Confidence", "(d) N_g=1|Feature", "(e) N_g=2|NoFusion", 'Location', 'southeast')
xlabel("Signal-to-Noise(dB)")
ylabel("Accuracy(%)")


% Rep4
rep4_NoComb_NoFusion = [0.483515000000000 0.485515000000000   0.492340000000000   0.500510000000000   0.554930000000000   0.617920000000000   0.671945000000000   0.722715000000000   0.769290000000000   0.809405000000000   0.841815000000000   0.865585000000000   0.891340000000000   0.919750000000000   0.933740000000000   0.935555000000000];

rep4_NoComb_Voting = [0.483515000000000 0.485037500000000   0.491321250000000   0.499566250000000   0.555538750000000   0.618192500000000   0.671921250000000   0.723088750000000   0.769195000000000   0.809291250000000   0.841617500000000   0.865885000000000   0.890928750000000   0.919978750000000   0.933755000000000   0.935976250000000];
rep4_NoComb_Confidence = [0.492485000000000 0.494485000000000   0.497520000000000   0.506265000000000   0.593955000000000   0.670075000000000   0.728205000000000   0.775940000000000   0.817950000000000   0.851700000000000   0.879255000000000   0.898015000000000   0.918085000000000   0.944020000000000   0.951690000000000   0.951775000000000];
rep4_NoComb_Feature = [0.493205000000000 0.493205000000000   0.496560000000000   0.505550000000000   0.596265000000000   0.674905000000000   0.732135000000000   0.780510000000000   0.821200000000000   0.854435000000000   0.881260000000000   0.899295000000000   0.918720000000000   0.944675000000000   0.951950000000000   0.951895000000000];

rep4_2Comb_NoFusion = [0.488135000000000   0.495415000000000   0.503405000000000   0.592415000000000   0.645415000000000   0.698220000000000   0.747175000000000   0.788965000000000   0.824945000000000   0.855580000000000   0.884455000000000   0.903040000000000   0.925390000000000   0.935465000000000   0.953710000000000   0.953640000000000];
rep4_2Comb_Voting = [0.488517500000000   0.496132500000000   0.504242500000000   0.593180000000000   0.645175000000000   0.698195000000000   0.746877500000000   0.789262500000000   0.825650000000000   0.855447500000000   0.884140000000000   0.902887500000000   0.925127500000000   0.935205000000000   0.953500000000000   0.953657500000000];
rep4_2Comb_Confidence = [0.492255000000000   0.498615000000000   0.508105000000000   0.616465000000000   0.672085000000000   0.723925000000000   0.772840000000000   0.812255000000000   0.847160000000000   0.875135000000000   0.902630000000000   0.918325000000000   0.937585000000000   0.945940000000000   0.961980000000000   0.960095000000000];
rep4_2Comb_Feature = [0.493010000000000   0.498660000000000   0.508115000000000   0.619060000000000   0.675800000000000   0.728685000000000   0.775945000000000   0.815915000000000   0.849300000000000   0.876155000000000   0.903475000000000   0.918830000000000   0.937765000000000   0.946020000000000   0.962045000000000   0.960095000000000];

rep4_4Comb_NoFusion = [0.499535000000000   0.567315000000000   0.620370000000000   0.672005000000000   0.722755000000000   0.770065000000000   0.806615000000000   0.844910000000000   0.872155000000000   0.891260000000000   0.912570000000000   0.937680000000000   0.940485000000000   0.954865000000000   0.958550000000000   0.960310000000000];

figure;
plot(snr, rep4_NoComb_NoFusion, '-^'); hold on; grid on;
plot(snr, rep4_NoComb_Voting, '-*'); hold on;
plot(snr ,rep4_NoComb_Confidence, "-x"); hold on;
plot(snr ,rep4_NoComb_Feature, "-o"); hold on;
plot(snr ,rep4_2Comb_NoFusion, "-|"); hold on;
title("Aggregation Factor n=4일 때 AMC 결과 그래프")
legend("(a) N_g=1|NoFusion", "(b) N_g=1|Voting", "(c) N_g=1|Confidence", "(d) N_g=1|Feature", "(e) N_g=2|NoFusion", 'Location', 'southeast')
xlabel("Signal-to-Noise(dB)")
ylabel("Accuracy(%)")


figure;
plot(snr, rep4_2Comb_NoFusion, '-^'); hold on; grid on;
plot(snr, rep4_2Comb_Voting, '-*'); hold on;
plot(snr ,rep4_2Comb_Confidence, "-x"); hold on;
plot(snr ,rep4_2Comb_Feature, "-o"); hold on;
plot(snr ,rep4_4Comb_NoFusion, "-|"); hold on;
title("Aggregation Factor n=4일 때 AMC 결과 그래프")
legend("(a) N_g=2|NoFusion", "(b) N_g=2|Voting", "(c) N_g=2|Confidence", "(d) N_g=2|Feature", "(e) N_g=4|NoFusion", 'Location', 'southeast')
xlabel("Signal-to-Noise(dB)")
ylabel("Accuracy(%)")

% Rep8
rep8_NoComb_NoFusion = [0.476490000000000	0.486850000000000	0.492565000000000	0.497085000000000	0.555560000000000	0.619675000000000	0.671975000000000	0.722755000000000	0.769070000000000	0.808115000000000	0.840630000000000	0.866680000000000	0.889455000000000	0.919485000000000	0.933755000000000	0.935340000000000];

rep8_NoComb_Voting = [0.475732500000000	0.486316250000000	0.491555000000000	0.498491250000000	0.555362500000000	0.618694375000000	0.672157500000000	0.722523125000000	0.769066875000000	0.809210625000000	0.840669375000000	0.865971250000000	0.890571875000000	0.919820625000000	0.934315625000000	0.936364375000000];
rep8_NoComb_Confidence = [0.493505000000000	0.496690000000000	0.496265000000000	0.505420000000000	0.614735000000000	0.694870000000000	0.752350000000000	0.794900000000000	0.836635000000000	0.865515000000000	0.888900000000000	0.906025000000000	0.923860000000000	0.949395000000000	0.954890000000000	0.954925000000000];
rep8_NoComb_Feature = [0.489770000000000	0.494645000000000	0.495110000000000	0.504220000000000	0.614470000000000	0.698580000000000	0.754115000000000	0.798890000000000	0.838890000000000	0.867810000000000	0.890370000000000	0.907795000000000	0.924635000000000	0.949890000000000	0.955390000000000	0.955255000000000];

rep8_2Comb_NoFusion = [0.490775000000000	0.494905000000000	0.504215000000000	0.593550000000000	0.644225000000000	0.697775000000000	0.747685000000000	0.789075000000000	0.824575000000000	0.856590000000000	0.884525000000000	0.903335000000000	0.924485000000000	0.935810000000000	0.952370000000000	0.954635000000000];
rep8_2Comb_Voting = [0.489983750000000	0.495775000000000	0.504513750000000	0.593373750000000	0.644175000000000	0.696696250000000	0.747278750000000	0.789741250000000	0.824812500000000	0.856558750000000	0.883995000000000	0.902995000000000	0.924123750000000	0.935195000000000	0.952555000000000	0.954300000000000];
rep8_2Comb_Confidence = [0.497570000000000	0.502445000000000	0.512900000000000	0.641210000000000	0.698680000000000	0.751520000000000	0.797995000000000	0.834330000000000	0.864510000000000	0.891035000000000	0.913925000000000	0.928555000000000	0.944120000000000	0.952365000000000	0.965595000000000	0.964480000000000];
rep8_2Comb_Feature = [0.496825000000000	0.501315000000000	0.512610000000000	0.645290000000000	0.703830000000000	0.756415000000000	0.802250000000000	0.837960000000000	0.866570000000000	0.892420000000000	0.914830000000000	0.929445000000000	0.944455000000000	0.952515000000000	0.965995000000000	0.964555000000000];

rep8_4Comb_NoFusion = [0.500520000000000   0.566045000000000   0.618485000000000   0.670970000000000   0.723265000000000   0.768660000000000   0.805595000000000   0.844675000000000 0.873505000000000	0.891535000000000	0.911715000000000	0.936770000000000	0.940260000000000	0.954180000000000	0.958030000000000	0.960640000000000];
rep8_4Comb_Voting = [0.499982500000000   0.566440000000000   0.619137500000000   0.671157500000000   0.722707500000000   0.768787500000000   0.806047500000000   0.844432500000000 0.873240000000000	0.891035000000000	0.912045000000000	0.937312500000000	0.940230000000000	0.954372500000000	0.958735000000000	0.960802500000000];
rep8_4Comb_Confidence = [0.502670000000000   0.585635000000000   0.645195000000000   0.699005000000000   0.747730000000000   0.793350000000000   0.828715000000000   0.865565000000000 0.893725000000000	0.906905000000000	0.926625000000000	0.948615000000000	0.950160000000000	0.961830000000000	0.964485000000000	0.964920000000000];
rep8_4Comb_Feature = [0.502875000000000   0.587695000000000   0.648395000000000   0.702565000000000   0.752285000000000   0.796310000000000   0.830655000000000   0.867400000000000 0.894515000000000	0.907360000000000	0.927005000000000	0.948640000000000	0.950260000000000	0.961895000000000	0.964470000000000	0.964925000000000];


figure;
plot(snr, rep8_NoComb_NoFusion, '-^'); hold on; grid on;
plot(snr, rep8_NoComb_Voting, '-*'); hold on;
plot(snr ,rep8_NoComb_Confidence, "-x"); hold on;
plot(snr ,rep8_NoComb_Feature, "-o"); hold on;
plot(snr ,rep8_2Comb_NoFusion, "-|"); hold on;
title("Aggregation Factor n=8일 때 AMC 결과 그래프")
legend("(a) N_g=1|NoFusion", "(b) N_g=1|Voting", "(c) N_g=1|Confidence", "(d) N_g=1|Feature", "(e) N_g=2|NoFusion", 'Location', 'southeast')
xlabel("Signal-to-Noise(dB)")
ylabel("AccuraCcy(%)")

figure;
plot(snr, rep8_2Comb_NoFusion, '-^'); hold on; grid on;
plot(snr, rep8_2Comb_Voting, '-*'); hold on;
plot(snr ,rep8_2Comb_Confidence, "-x"); hold on;
plot(snr ,rep8_2Comb_Feature, "-o"); hold on;
plot(snr ,rep8_4Comb_NoFusion, "-|"); hold on;
title("Aggregation Factor n=8일 때 AMC 결과 그래프")
legend("(a) N_g=2|NoFusion", "(b) N_g=2|Voting", "(c) N_g=2|Confidence", "(d) N_g=2|Feature", "(e) N_g=4|NoFusion", 'Location', 'southeast')
xlabel("Signal-to-Noise(dB)")
ylabel("Accuracy(%)")

figure;
plot(snr, rep8_4Comb_NoFusion, '-^'); hold on; grid on;
plot(snr, rep8_4Comb_Voting, '-*'); hold on;
plot(snr ,rep8_4Comb_Confidence, "-x"); hold on;
plot(snr ,rep8_4Comb_Feature, "-o"); hold on;
% plot(snr ,rep8_8Comb_NoFusion, "-|"); hold on;
title("Aggregation Factor n=8일 때 AMC 결과 그래프")
legend("(a) N_g=4|NoFusion", "(b) N_g=4|Voting", "(c) N_g=4|Confidence", "(d) N_g=4|Feature",'Location', 'southeast')
xlabel("Signal-to-Noise(dB)")
ylabel("Accuracy(%)")


figure;
plot(snr ,rep2_NoComb_Feature, "-*"); hold on; grid on;
plot(snr ,rep2_2Comb_NoFusion, "-^"); hold on;
% title("Aggregation Factor n=2일 때 Soft-Combining Level에 따른 AMC 결과 그래프")
legend("(a) N_g=1|Feature", "(b) N_g=2|NoFusion", 'Location', 'southeast')
xlabel("Signal-to-Noise(dB)")
ylabel("Accuracy(%)")

figure;
plot(snr ,rep4_NoComb_Feature, "-^"); hold on; grid on;
plot(snr ,rep4_2Comb_Feature, "-*"); hold on;
plot(snr ,rep4_2Comb_NoFusion, "-*"); hold on;
% title("Aggregation Factor n=4일 때 Soft-Combining Level에 따른 AMC 결과 그래프")
legend("(a) N_g=1|Feature", "(b) N_g=2|Feature", "(c) N_g=4|NoFusion", 'Location', 'southeast')
xlabel("Signal-to-Noise(dB)")
ylabel("Accuracy(%)")

figure;
plot(snr ,rep8_NoComb_Feature, "-^"); hold on; grid on;
plot(snr ,rep8_2Comb_Feature, "-*"); hold on;
plot(snr ,rep8_4Comb_Feature, "-x"); hold on;
% title("Aggregation Factor n=8일 때 Soft-Combining Level에 따른 AMC 결과 그래프")
legend("(a) N_g=1|Feature", "(b) N_g=2|Feature", "(c) N_g=4|Feature",'Location', 'southeast')
xlabel("Signal-to-Noise(dB)")
ylabel("Accuracy(%)")

